/**
 * Scanner Modal Styles
 * Follows design system: docs/design/FEEDBACK.md (Modal specs)
 * Uses design tokens only - no hard-coded values
 */

/* =========================================================================
   Modal Override for Scanner (Large size)
   ========================================================================= */

.modal-scanner {
  max-width: 800px; /* Large modal for image preview */
}

/* =========================================================================
   Scanner Body
   ========================================================================= */

.scanner-body {
  padding: var(--space-6);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-4);
  min-height: 400px;
}

/* =========================================================================
   Loading State
   ========================================================================= */

.scanner-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-10);
}

.scanner-loading p {
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--slate-200);
  border-top-color: var(--color-primary);
  border-radius: var(--radius-full);
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* =========================================================================
   Error State
   ========================================================================= */

.scanner-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-10);
  text-align: center;
}

.error-message {
  font-size: var(--text-base);
  font-weight: 600;
  color: var(--rose-700);
  margin: 0;
}

.error-hint {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  margin: 0;
}

/* =========================================================================
   Canvas Container
   ========================================================================= */

.scanner-canvas-container {
  position: relative;
  max-width: 100%;
  max-height: 500px;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-2);
}

.scanner-canvas {
  display: block;
  max-width: 100%;
  height: auto;
  cursor: crosshair;
}

/* =========================================================================
   Corner Markers (Draggable)
   ========================================================================= */

.corner-markers {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* Let markers handle their own events */
}

.corner-marker {
  position: absolute;
  width: 44px; /* Minimum touch target (WCAG AAA) */
  height: 44px;
  margin-left: -22px; /* Center on point */
  margin-top: -22px;
  background: var(--color-primary);
  border: 3px solid var(--slate-50);
  border-radius: var(--radius-full);
  box-shadow: var(--shadow-2);
  cursor: grab;
  pointer-events: auto;
  transition: transform var(--duration-fast) var(--ease-out);
  z-index: 10;
}

.corner-marker:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-3);
}

.corner-marker:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.corner-marker--dragging {
  cursor: grabbing;
  transform: scale(1.2);
  box-shadow: var(--shadow-4);
  transition: none; /* Instant feedback while dragging */
}

/* Inner dot for visual feedback */
.corner-marker::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 12px;
  height: 12px;
  background: var(--slate-50);
  border-radius: var(--radius-full);
}

/* =========================================================================
   Hint Text
   ========================================================================= */

.scanner-hint {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  text-align: center;
  margin: 0;
}

/* =========================================================================
   Icon Button (Back button)
   ========================================================================= */

.btn-icon {
  background: transparent;
  border: none;
  color: var(--slate-600);
  cursor: pointer;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-md);
  transition: all var(--duration-fast);
}

.btn-icon:hover:not(:disabled) {
  background: var(--slate-100);
  color: var(--slate-800);
}

.btn-icon:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-icon:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* =========================================================================
   Responsive Design
   ========================================================================= */

@media (max-width: 768px) {
  .modal-scanner {
    max-width: 95vw;
  }

  .scanner-body {
    padding: var(--space-4);
    min-height: 300px;
  }

  .scanner-canvas-container {
    max-height: 400px;
  }

  /* Larger corner markers on mobile for easier touch */
  .corner-marker {
    width: 56px;
    height: 56px;
    margin-left: -28px;
    margin-top: -28px;
  }
}

/* =========================================================================
   Accessibility - Reduced Motion
   ========================================================================= */

@media (prefers-reduced-motion: reduce) {
  .corner-marker {
    transition: none;
  }

  .spinner {
    animation: none;
    border-top-color: var(--slate-400); /* Static indicator */
  }
}
