
## 📷 Yorutsuke V4.8: Capture 设计详解

### 1. 设计理念 (Design Philosophy)

Capture 是 Yorutsuke 的核心交互入口——将物理收据转化为数字记录。

* **零摩擦设计**：拖拽即上传，无需点击按钮。
* **即时反馈**：每一步操作都有视觉和状态确认。
* **批量友好**：支持一次拖入多张图片。

---

### 2. 拖放区域 (Drop Zone)

#### A. 默认状态

```
┌─────────────────────────────────────┐
│                                     │
│     ┌───────────────────────┐       │
│     │                       │       │
│     │    📄 拖拽收据到此处   │       │
│     │                       │       │
│     │   支持 JPG, PNG, HEIC │       │
│     │                       │       │
│     └───────────────────────┘       │
│                                     │
└─────────────────────────────────────┘
```

* **边框**：2px dashed `Slate-300`
* **背景**：`Slate-50` 点阵网格
* **圆角**：16px

#### B. 拖拽悬停状态 (Dragging)

* **边框变化**：dashed → solid, `Slate-300` → `Blue-500`
* **背景变化**：`Blue-50` 淡蓝色高亮
* **动效**：边框呼吸动画 (pulse)
* **文字**：「松开以上传」

#### C. 上传中状态

* **进度条**：蓝色填充，从左到右
* **文件预览**：缩略图 + 文件名
* **阶段指示**：压缩中 → 上传中 → 完成

---

### 3. 处理队列 (Processing Queue)

位于拖放区下方，展示所有待处理和已处理的图片。

#### 队列项卡片

```
┌─────────────────────────────────────────────┐
│ 🖼️ [缩略图]  receipt_001.jpg               │
│              ████████░░░░ 75%  压缩中...    │
└─────────────────────────────────────────────┘
```

#### 状态标识

| 状态 | 颜色 | 图标 | 说明 |
|------|------|------|------|
| pending | Slate-400 | ⏳ | 等待处理 |
| compressing | Blue-500 | 🔄 | 压缩中 |
| uploading | Blue-500 | ☁️ | 上传中 |
| uploaded | Emerald-500 | ✅ | 已上传 |
| failed | Rose-500 | ❌ | 失败（可重试） |

#### 失败项操作

* **重试按钮**：单项重试
* **全部重试**：批量重试所有失败项
* **删除**：从队列移除

---

### 4. 配额指示器 (Quota Indicator)

位于页面顶部，实时显示上传配额。

```
┌─────────────────────────────────────┐
│  今日配额: 28/30  ████████████░░    │
└─────────────────────────────────────┘
```

* **正常**：Emerald 进度条
* **警告** (>80%)：Amber 进度条
* **已满** (100%)：Rose 进度条 + 禁用拖放区

---

### 5. 网络状态反馈 (Network Status)

#### 离线状态

```
┌─────────────────────────────────────┐
│  ⚠️ 当前离线 - 队列已暂停           │
│     恢复连接后将自动继续上传        │
└─────────────────────────────────────┘
```

* **Banner 颜色**：Amber-100 背景 + Amber-800 文字
* **队列行为**：暂停处理，保留待上传项

---

### 6. 重复检测 (Duplicate Detection)

当检测到重复图片时：

```
┌─────────────────────────────────────┐
│  ℹ️ 检测到重复图片                   │
│     此图片已于 2025-01-03 上传       │
│     已自动跳过                       │
└─────────────────────────────────────┘
```

* **检测方式**：MD5 哈希比对
* **用户体验**：自动跳过，不中断流程

